# 仿闲鱼二手交易平台需求文档（学生版）

## 1. 项目概述

### 1.1 项目背景
开发一个仿闲鱼的二手交易平台，作为学生项目展示Spring Boot技术栈的应用能力，专注于核心功能实现。

### 1.2 项目目标
- 展示Spring Boot + MyBatis + Redis + RabbitMQ + MySQL技术栈应用
- 实现完整的用户管理和商品管理功能
- 完成基础的交易流程
- 为实习和校招提供项目经验

### 1.3 功能优先级标注
- 🔴 **必做功能**：核心业务功能，必须实现
- 🟡 **选做功能**：有时间可以实现的增强功能
- 🟢 **扩展功能**：未来可以添加的高级功能

## 2. 功能需求

### 2.1 用户管理模块

#### 2.1.1 用户注册与登录 🔴
- **用户注册**：支持手机号注册
- **用户登录**：支持手机号+密码登录
- **账号类型**：个人用户/商铺用户
- **密码管理**：修改密码

#### 2.1.2 用户信息管理 🔴
- **个人资料**：昵称、头像、手机号
- **地址管理**：收货地址的增删改查
- **账号安全**：基础登录验证

#### 2.1.3 扩展功能 🟢
- **实名认证**：身份证实名认证
- **密码找回**：短信验证码找回
- **登录记录**：设备管理

### 2.2 商品管理模块

#### 2.2.1 商品发布 🔴
- **基本信息**：商品标题、描述、价格、成色
- **商品分类**：二级分类选择（简化版）
- **商品图片**：支持多图上传，封面图设置
- **地理位置**：商品所在城市/地区
- **交易方式**：线上交易/线下面交

#### 2.2.2 商品展示 🔴
- **商品列表**：分类浏览、关键词搜索、价格排序
- **商品详情**：详细信息、图片展示、卖家信息
- **商品状态**：在售、已售出、交涉中(商品处理一种中间状态 即交涉中)
- **浏览统计**：浏览次数记录

#### 2.2.3 商品管理 🔴
- **我的发布**：查看、编辑、删除已发布商品
- **商品状态**：上架、下架、标记已售、交涉中

#### 2.2.4 选做功能 🟡
- **商品规格**：支持多规格商品（颜色、尺寸等）
- **库存管理**：多规格商品库存管理
- **高级搜索**：多条件筛选

#### 2.2.5 扩展功能 🟢
- **多级分类**：三级以上分类
- **商品推荐**：基于用户行为的推荐
- **商品对比**：商品对比功能

### 2.3 交易管理模块

#### 2.3.1 商品收藏 🔴
- **商品收藏**：收藏感兴趣的商品
- **收藏管理**：查看、删除收藏

#### 2.3.2 订单管理 🔴
- **下单流程**：选择商品、确认信息、提交订单
- **订单状态**：待付款、待发货、待收货、已完成、已取消
- **订单详情**：商品信息、价格、地址
- **订单操作**：取消订单、确认收货

#### 2.3.3 支付管理 🟡
- **支付方式**：模拟支付（不接入真实支付）
- **支付状态**：支付成功、支付失败
- **订单支付**：订单支付流程

#### 2.3.4 扩展功能 🟢
- **购物车**：添加商品到购物车
- **退款处理**：申请退款、退款审核
- **物流跟踪**：物流信息查询

### 2.4 通讯模块 🟡

#### 2.4.1 基础通讯
- **聊天功能**：买卖双方实时聊天
- **消息类型**：文字消息
- **消息状态**：已发送、已读、未读
- **聊天记录**：历史消息保存

#### 2.4.2 扩展功能 🟢
- **消息类型**：图片、语音、表情
- **商品咨询**：针对特定商品的咨询
- **快速回复**：常用回复模板

### 2.5 评价信用模块 🟡

#### 2.5.1 基础评价
- **交易评价**：买卖双方互评
- **评价内容**：评分（1-5星）、文字评价
- **评价展示**：用户评价历史展示

#### 2.5.2 扩展功能 🟢
- **信用体系**：基于交易记录和评价的信用等级
- **评价管理**：评价的查看、回复
- **信用影响**：信用对交易的影响

### 2.6 商铺管理模块 🟢
- **商铺申请**：个人用户申请成为商铺
- **商铺运营**：商铺商品管理、订单处理
- **数据统计**：销售数据、访问统计

### 2.7 搜索推荐模块

#### 2.7.1 基础搜索 🔴
- **关键词搜索**：商品标题、描述搜索
- **分类筛选**：按分类筛选
- **排序功能**：按价格、时间排序

#### 2.7.2 扩展功能 🟢
- **高级搜索**：多条件筛选
- **推荐系统**：个性化推荐、热门推荐
- **搜索历史**：用户搜索历史记录

### 2.8 系统管理模块 🟡

#### 2.8.1 基础管理
- **商品审核**：商品信息审核
- **用户管理**：用户账号管理
- **分类管理**：商品分类的增删改查

#### 2.8.2 扩展功能 🟢
- **数据统计**：平台运营数据
- **举报处理**：违规内容处理
- **系统配置**：平台参数配置

## 3. 技术架构（学生版）

### 3.1 后端技术栈 🔴
- **开发语言**：Java 8+
- **框架**：Spring Boot 2.7+
- **ORM**：MyBatis 3.5+
- **数据库**：MySQL 8.0
- **缓存**：Redis 6.0+
- **消息队列**：RabbitMQ 3.8+
- **构建工具**：Maven 3.6+

### 3.2 前端技术栈 🟡
- **Web端**：Vue.js 3 + Element Plus
- **移动端**：微信小程序（可选）

### 3.3 开发工具
- **IDE**：IntelliJ IDEA
- **数据库工具**：Navicat/DBeaver
- **API测试**：Postman
- **版本控制**：Git + GitHub

### 3.4 部署方案 🟡
- **本地开发**：本地MySQL + Redis
- **测试环境**：Docker容器化部署
- **生产环境**：云服务器部署

## 4. 项目开发计划

### 4.1 第一阶段：基础功能（4-6周）🔴
- **Week 1-2**：项目搭建 + 用户管理
  - Spring Boot项目初始化
  - 数据库设计和建表
  - 用户注册、登录、信息管理
  - JWT认证实现

- **Week 3-4**：商品管理
  - 商品发布、编辑、删除
  - 商品列表、详情展示
  - 商品分类管理
  - 图片上传功能

- **Week 5-6**：交易功能
  - 商品收藏功能
  - 订单创建、管理
  - 基础搜索功能

### 4.2 第二阶段：增强功能（2-3周）🟡
- **Week 7-8**：通讯和评价
  - 基础聊天功能
  - 交易评价系统
  - 系统管理后台

- **Week 9**：优化和测试
  - 性能优化
  - 功能测试
  - 部署上线

### 4.3 第三阶段：扩展功能（可选）🟢
- 高级搜索功能
- 推荐系统
- 商铺功能
- 移动端开发

## 5. 核心功能实现要点

### 5.1 必做功能技术要点 🔴

#### 5.1.1 用户管理
- **JWT认证**：自行使用AOP等实现权限控制 + jwt
- **密码加密**：使用BCrypt加密存储密码
- **参数验证**：使用@Valid注解进行参数校验
- **异常处理**：统一异常处理机制

#### 5.1.2 商品管理
- **文件上传**：使用Spring Boot文件上传功能
- **图片存储**：本地存储或云存储（阿里云OSS）
- **分页查询**：使用PageHelper实现分页
- **缓存优化**：使用Redis缓存热门商品

#### 5.1.3 订单管理
- **事务管理**：使用@Transactional保证数据一致性
- **状态机**：订单状态流转管理
- **消息队列**：使用RabbitMQ处理异步任务

### 5.2 选做功能技术要点 🟡

#### 5.2.1 通讯功能
- **WebSocket**：实现实时通讯
- **消息存储**：聊天记录存储和查询
- **在线状态**：用户在线状态管理

#### 5.2.2 评价系统
- **评分计算**：用户信用评分算法
- **评价展示**：评价列表和统计

### 5.3 技术难点和解决方案

#### 5.3.1 性能优化
- **数据库优化**：合理使用索引，避免N+1查询
- **缓存策略**：Redis缓存热点数据
- **分页优化**：使用游标分页处理大数据量

#### 5.3.2 并发处理
- **乐观锁**：处理商品库存并发问题
- **分布式锁**：使用Redis实现分布式锁
- **消息队列**：异步处理耗时操作

## 6. 项目展示要点

### 6.1 技术亮点
- **Spring Boot**：微服务架构，自动配置
- **MyBatis**：SQL优化，动态SQL
- **Redis**：缓存设计，性能优化
- **RabbitMQ**：异步处理，解耦设计
- **JWT**：无状态认证，安全性

### 6.2 业务亮点
- **完整流程**：从用户注册到交易完成的完整业务闭环
- **用户体验**：友好的界面设计和交互体验
- **数据安全**：密码加密，SQL注入防护
- **扩展性**：模块化设计，易于扩展

### 6.3 面试准备
- **项目介绍**：3分钟项目介绍，突出技术栈
- **技术细节**：准备技术实现细节和优化方案
- **问题解决**：准备开发过程中遇到的问题和解决方案
- **代码质量**：代码规范，注释完整，测试覆盖