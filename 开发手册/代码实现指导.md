# ä»¿é—²é±¼é¡¹ç›®ä»£ç å®ç°æŒ‡å¯¼

## ğŸš€ ç«‹å³å¼€å§‹ï¼šå®Œå–„é¡¹ç›®é…ç½®

### 1. å®Œå–„serveræ¨¡å—ä¾èµ–

é¦–å…ˆï¼Œä½ éœ€è¦å®Œå–„ `server/pom.xml` æ–‡ä»¶ï¼Œæ·»åŠ æ‰€æœ‰å¿…è¦çš„ä¾èµ–ï¼š

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>3.5.5</version>
        <relativePath/>
    </parent>
    <groupId>com.zhuxi</groupId>
    <artifactId>server</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>server</name>
    <description>server</description>
    
    <properties>
        <java.version>17</java.version>
    </properties>
    
    <dependencies>
        <!-- Spring Boot Web -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
        
        <!-- MyBatis Plus -->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>3.5.3.1</version>
        </dependency>
        
        <!-- MySQLé©±åŠ¨ -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>8.0.33</version>
        </dependency>
        
        <!-- Redis -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-data-redis</artifactId>
        </dependency>
        
        <!-- RabbitMQ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-amqp</artifactId>
        </dependency>
        
        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        
        <!-- å‚æ•°éªŒè¯ -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
        
        <!-- JWT -->
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-api</artifactId>
            <version>0.12.3</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-impl</artifactId>
            <version>0.12.3</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-jackson</artifactId>
            <version>0.12.3</version>
        </dependency>
        
        <!-- å·¥å…·ç±» -->
        <dependency>
            <groupId>cn.hutool</groupId>
            <artifactId>hutool-all</artifactId>
            <version>5.8.22</version>
        </dependency>
        
        <!-- åˆ†é¡µæ’ä»¶ -->
        <dependency>
            <groupId>com.github.pagehelper</groupId>
            <artifactId>pagehelper-spring-boot-starter</artifactId>
            <version>1.4.7</version>
        </dependency>
        
        <!-- Lombok -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
        
        <!-- æµ‹è¯• -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>
    
    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <configuration>
                    <excludes>
                        <exclude>
                            <groupId>org.projectlombok</groupId>
                            <artifactId>lombok</artifactId>
                        </exclude>
                    </excludes>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

### 2. åˆ›å»ºé…ç½®æ–‡ä»¶

åˆ›å»º `server/src/main/resources/application.yml`ï¼š

```yaml
server:
  port: 8080

spring:
  application:
    name: secondhand-market
  
  # æ•°æ®åº“é…ç½®
  datasource:
    url: jdbc:mysql://localhost:3306/secondhand?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
  
  # Redisé…ç½®
  redis:
    host: localhost
    port: 6379
    database: 0
    timeout: 5000ms
    lettuce:
      pool:
        max-active: 8
        max-wait: -1ms
        max-idle: 8
        min-idle: 0
  
  # RabbitMQé…ç½®
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    virtual-host: /

# MyBatis Plusé…ç½®
mybatis-plus:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.zhuxi.pojo.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0

# åˆ†é¡µé…ç½®
pagehelper:
  helper-dialect: mysql
  reasonable: true
  support-methods-arguments: true

# æ—¥å¿—é…ç½®
logging:
  level:
    com.zhuxi: debug
    org.springframework.security: debug
```

## ğŸ“ é¡¹ç›®ç»“æ„åˆ›å»º

### 1. åˆ›å»ºç›®å½•ç»“æ„

åœ¨IDEAä¸­åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
server/src/main/java/com/zhuxi/server/
â”œâ”€â”€ config/                 # é…ç½®ç±»
â”œâ”€â”€ controller/             # æ§åˆ¶å™¨
â”œâ”€â”€ service/                # æœåŠ¡å±‚
â”‚   â””â”€â”€ impl/              # æœåŠ¡å®ç°
â”œâ”€â”€ mapper/                 # æ•°æ®è®¿é—®å±‚
â”œâ”€â”€ handler/                # å¼‚å¸¸å¤„ç†å™¨
â”œâ”€â”€ interceptor/            # æ‹¦æˆªå™¨
â””â”€â”€ aspect/                 # åˆ‡é¢

server/src/main/resources/
â”œâ”€â”€ mapper/                 # MyBatisæ˜ å°„æ–‡ä»¶
â””â”€â”€ application.yml         # é…ç½®æ–‡ä»¶
```

## ğŸ”§ æ ¸å¿ƒä»£ç å®ç°

### 1. å…¬å…±æ¨¡å—ä»£ç 

#### ç»Ÿä¸€å“åº”ç»“æœç±»

**common/src/main/java/com/zhuxi/common/result/Result.java**
```java
package com.zhuxi.common.result;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class Result<T> {
    private Integer code;
    private String message;
    private T data;
    private Long timestamp;
    
    public static <T> Result<T> success() {
        return new Result<>(200, "success", null, System.currentTimeMillis());
    }
    
    public static <T> Result<T> success(T data) {
        return new Result<>(200, "success", data, System.currentTimeMillis());
    }
    
    public static <T> Result<T> success(String message, T data) {
        return new Result<>(200, message, data, System.currentTimeMillis());
    }
    
    public static <T> Result<T> error(String message) {
        return new Result<>(500, message, null, System.currentTimeMillis());
    }
    
    public static <T> Result<T> error(Integer code, String message) {
        return new Result<>(code, message, null, System.currentTimeMillis());
    }
}
```

#### åˆ†é¡µç»“æœç±»

**common/src/main/java/com/zhuxi/common/result/PageResult.java**
```java
package com.zhuxi.common.result;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;
import java.util.List;

@Data
@AllArgsConstructor
@NoArgsConstructor
public class PageResult<T> {
    private List<T> list;
    private Long total;
    private Integer page;
    private Integer size;
    private Integer totalPages;
    
    public static <T> PageResult<T> of(List<T> list, Long total, Integer page, Integer size) {
        PageResult<T> result = new PageResult<>();
        result.setList(list);
        result.setTotal(total);
        result.setPage(page);
        result.setSize(size);
        result.setTotalPages((int) Math.ceil((double) total / size));
        return result;
    }
}
```

#### ä¸šåŠ¡å¼‚å¸¸ç±»

**common/src/main/java/com/zhuxi/common/exception/BusinessException.java**
```java
package com.zhuxi.common.exception;

import lombok.Data;
import lombok.EqualsAndHashCode;

@Data
@EqualsAndHashCode(callSuper = true)
public class BusinessException extends RuntimeException {
    private Integer code;
    private String message;
    
    public BusinessException(String message) {
        super(message);
        this.code = 500;
        this.message = message;
    }
    
    public BusinessException(Integer code, String message) {
        super(message);
        this.code = code;
        this.message = message;
    }
}
```

#### JWTå·¥å…·ç±»

**common/src/main/java/com/zhuxi/common/utils/JwtUtil.java**
```java
package com.zhuxi.common.utils;

import io.jsonwebtoken.Claims;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import org.springframework.stereotype.Component;

import java.util.Date;

@Component
public class JwtUtil {
    private static final String SECRET = "secondhand-market-secret-key-2024";
    private static final int EXPIRE_TIME = 7 * 24 * 60 * 60 * 1000; // 7å¤©
    
    public String generateToken(String username) {
        return Jwts.builder()
                .setSubject(username)
                .setIssuedAt(new Date())
                .setExpiration(new Date(System.currentTimeMillis() + EXPIRE_TIME))
                .signWith(SignatureAlgorithm.HS512, SECRET)
                .compact();
    }
    
    public String getUsernameFromToken(String token) {
        Claims claims = Jwts.parser()
                .setSigningKey(SECRET)
                .parseClaimsJws(token)
                .getBody();
        return claims.getSubject();
    }
    
    public boolean isTokenExpired(String token) {
        try {
            Claims claims = Jwts.parser()
                    .setSigningKey(SECRET)
                    .parseClaimsJws(token)
                    .getBody();
            return claims.getExpiration().before(new Date());
        } catch (Exception e) {
            return true;
        }
    }
    
    public boolean validateToken(String token, String username) {
        try {
            String tokenUsername = getUsernameFromToken(token);
            return username.equals(tokenUsername) && !isTokenExpired(token);
        } catch (Exception e) {
            return false;
        }
    }
}
```

### 2. å®ä½“ç±»ä»£ç 

#### ç”¨æˆ·å®ä½“ç±»

**POJO/src/main/java/com/zhuxi/pojo/entity/User.java**
```java
package com.zhuxi.pojo.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.time.LocalDateTime;

@Data
@TableName("user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String userSn;
    private String username;
    private String password;
    private String nickname;
    private String email;
    private String phone;
    private String avatar;
    private Integer userStatus;
    private String role;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createdAt;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updatedAt;
}
```

#### å•†å“å®ä½“ç±»

**POJO/src/main/java/com/zhuxi/pojo/entity/Product.java**
```java
package com.zhuxi.pojo.entity;

import com.baomidou.mybatisplus.annotation.*;
import lombok.Data;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Data
@TableName("product")
public class Product {
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String productSn;
    private Long sellerId;
    private Long shopId;
    private String title;
    private String description;
    private Long categoryId;
    private BigDecimal price;
    private Integer condition;
    private Integer userStatus;
    private String location;
    private Integer viewCount;
    
    @TableField(fill = FieldFill.INSERT)
    private LocalDateTime createdAt;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private LocalDateTime updatedAt;
}
```

### 3. DTOç±»ä»£ç 

#### ç”¨æˆ·æ³¨å†ŒDTO

**POJO/src/main/java/com/zhuxi/pojo/DTO/UserRegisterDTO.java**
```java
package com.zhuxi.pojo.DTO;

import lombok.Data;
import javax.validation.constraints.NotBlank;
import javax.validation.constraints.Pattern;
import javax.validation.constraints.Email;

@Data
public class UserRegisterDTO {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^.{6,20}$", message = "å¯†ç é•¿åº¦å¿…é¡»åœ¨6-20ä½ä¹‹é—´")
    private String password;
    
    @NotBlank(message = "æ‰‹æœºå·ä¸èƒ½ä¸ºç©º")
    @Pattern(regexp = "^1[3-9]\\d{9}$", message = "æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®")
    private String phone;
    
    @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
    private String email;
    
    private String nickname;
}
```

#### ç™»å½•DTO

**POJO/src/main/java/com/zhuxi/pojo/DTO/LoginDTO.java**
```java
package com.zhuxi.pojo.DTO;

import lombok.Data;
import javax.validation.constraints.NotBlank;

@Data
public class LoginDTO {
    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;
    
    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;
}
```

#### ç™»å½•å“åº”DTO

**POJO/src/main/java/com/zhuxi/pojo/DTO/LoginResponseDTO.java**
```java
package com.zhuxi.pojo.DTO;

import lombok.Data;

@Data
public class LoginResponseDTO {
    private String userSn;
    private String username;
    private String nickname;
    private String avatar;
    private String token;
    private Long expireTime;
}
```

### 4. Mapperå±‚ä»£ç 

#### ç”¨æˆ·Mapperæ¥å£

**server/src/main/java/com/zhuxi/server/mapper/UserMapper.java**
```java
package com.zhuxi.server.mapper;

import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.zhuxi.pojo.entity.User;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param;

@Mapper
public interface UserMapper extends BaseMapper<User> {
    User selectByUsername(@Param("username") String username);
    User selectByPhone(@Param("phone") String phone);
    User selectByEmail(@Param("email") String email);
}
```

#### ç”¨æˆ·Mapper XML

**server/src/main/resources/mapper/UserMapper.xml**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhuxi.server.mapper.UserMapper">
    
    <select id="selectByUsername" resultType="com.zhuxi.pojo.entity.User">
        SELECT * FROM user WHERE username = #{username}
    </select>
    
    <select id="selectByPhone" resultType="com.zhuxi.pojo.entity.User">
        SELECT * FROM user WHERE phone = #{phone}
    </select>
    
    <select id="selectByEmail" resultType="com.zhuxi.pojo.entity.User">
        SELECT * FROM user WHERE email = #{email}
    </select>
    
</mapper>
```

### 5. Serviceå±‚ä»£ç 

#### ç”¨æˆ·Serviceæ¥å£

**server/src/main/java/com/zhuxi/server/service/UserService.java**
```java
package com.zhuxi.server.service;

import com.zhuxi.common.result.Result;
import com.zhuxi.pojo.DTO.LoginDTO;
import com.zhuxi.pojo.DTO.LoginResponseDTO;
import com.zhuxi.pojo.DTO.UserRegisterDTO;

public interface UserService {
    Result<String> register(UserRegisterDTO registerDTO);
    Result<LoginResponseDTO> login(LoginDTO loginDTO);
}
```

#### ç”¨æˆ·Serviceå®ç°

**server/src/main/java/com/zhuxi/server/service/impl/UserServiceImpl.java**
```java
package com.zhuxi.server.service.impl;

import com.zhuxi.common.exception.BusinessException;
import com.zhuxi.common.result.Result;
import com.zhuxi.common.utils.JwtUtil;
import com.zhuxi.pojo.DTO.LoginDTO;
import com.zhuxi.pojo.DTO.LoginResponseDTO;
import com.zhuxi.pojo.DTO.UserRegisterDTO;
import com.zhuxi.pojo.entity.User;
import com.zhuxi.server.mapper.UserMapper;
import com.zhuxi.server.service.UserService;
import org.springframework.beans.BeanUtils;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.util.StringUtils;

import java.time.LocalDateTime;
import java.util.UUID;

@Service
public class UserServiceImpl implements UserService {
    
    @Autowired
    private UserMapper userMapper;
    
    @Autowired
    private JwtUtil jwtUtil;
    
    private final BCryptPasswordEncoder passwordEncoder = new BCryptPasswordEncoder();
    
    @Override
    public Result<String> register(UserRegisterDTO registerDTO) {
        // 1. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
        User existUser = userMapper.selectByUsername(registerDTO.getUsername());
        if (existUser != null) {
            throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
        }
        
        // 2. æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦å·²å­˜åœ¨
        if (StringUtils.hasText(registerDTO.getPhone())) {
            User existPhone = userMapper.selectByPhone(registerDTO.getPhone());
            if (existPhone != null) {
                throw new BusinessException("æ‰‹æœºå·å·²å­˜åœ¨");
            }
        }
        
        // 3. æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
        if (StringUtils.hasText(registerDTO.getEmail())) {
            User existEmail = userMapper.selectByEmail(registerDTO.getEmail());
            if (existEmail != null) {
                throw new BusinessException("é‚®ç®±å·²å­˜åœ¨");
            }
        }
        
        // 4. åˆ›å»ºç”¨æˆ·
        User user = new User();
        BeanUtils.copyProperties(registerDTO, user);
        user.setUserSn("USR" + System.currentTimeMillis() + UUID.randomUUID().toString().substring(0, 6));
        user.setPassword(passwordEncoder.encode(registerDTO.getPassword()));
        user.setStatus(1);
        user.setRole("user");
        user.setCreatedAt(LocalDateTime.now());
        user.setUpdatedAt(LocalDateTime.now());
        
        userMapper.insert(user);
        
        return Result.success("æ³¨å†ŒæˆåŠŸ");
    }
    
    @Override
    public Result<LoginResponseDTO> login(LoginDTO loginDTO) {
        // 1. æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·
        User user = userMapper.selectByUsername(loginDTO.getUsername());
        if (user == null) {
            throw new BusinessException("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
        }
        
        // 2. éªŒè¯å¯†ç 
        if (!passwordEncoder.matches(loginDTO.getPassword(), user.getPassword())) {
            throw new BusinessException("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯");
        }
        
        // 3. æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
        if (user.getStatus() != 1) {
            throw new BusinessException("ç”¨æˆ·è´¦å·å·²è¢«ç¦ç”¨");
        }
        
        // 4. ç”Ÿæˆtoken
        String token = jwtUtil.generateToken(user.getUsername());
        
        // 5. æ„å»ºå“åº”
        LoginResponseDTO response = new LoginResponseDTO();
        response.setUserSn(user.getUserSn());
        response.setUsername(user.getUsername());
        response.setNickname(user.getNickname());
        response.setAvatar(user.getAvatar());
        response.setToken(token);
        response.setExpireTime(System.currentTimeMillis() + 7 * 24 * 60 * 60 * 1000);
        
        return Result.success("ç™»å½•æˆåŠŸ", response);
    }
}
```

### 6. Controllerå±‚ä»£ç 

#### ç”¨æˆ·Controller

**server/src/main/java/com/zhuxi/server/controller/UserController.java**
```java
package com.zhuxi.server.controller;

import com.zhuxi.common.result.Result;
import com.zhuxi.pojo.DTO.LoginDTO;
import com.zhuxi.pojo.DTO.LoginResponseDTO;
import com.zhuxi.pojo.DTO.UserRegisterDTO;
import com.zhuxi.server.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import javax.validation.Valid;

@RestController
@RequestMapping("/api/v1/auth")
@CrossOrigin(origins = "*")
public class UserController {
    
    @Autowired
    private UserService userService;
    
    @PostMapping("/register")
    public Result<String> register(@RequestBody @Valid UserRegisterDTO registerDTO) {
        return userService.register(registerDTO);
    }
    
    @PostMapping("/login")
    public Result<LoginResponseDTO> login(@RequestBody @Valid LoginDTO loginDTO) {
        return userService.login(loginDTO);
    }
}
```

### 7. å¼‚å¸¸å¤„ç†å™¨

**server/src/main/java/com/zhuxi/server/handler/GlobalExceptionHandler.java**
```java
package com.zhuxi.server.handler;

import com.zhuxi.common.exception.BusinessException;
import com.zhuxi.common.result.Result;
import org.springframework.validation.BindException;
import org.springframework.validation.FieldError;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.ExceptionHandler;
import org.springframework.web.bind.annotation.RestControllerAdvice;

import java.util.List;

@RestControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public Result<Void> handleBusinessException(BusinessException e) {
        return Result.error(e.getCode(), e.getMessage());
    }
    
    @ExceptionHandler(MethodArgumentNotValidException.class)
    public Result<Void> handleValidationException(MethodArgumentNotValidException e) {
        List<FieldError> fieldErrors = e.getBindingResult().getFieldErrors();
        StringBuilder sb = new StringBuilder();
        for (FieldError fieldError : fieldErrors) {
            sb.append(fieldError.getDefaultMessage()).append("; ");
        }
        return Result.error(400, sb.toString());
    }
    
    @ExceptionHandler(BindException.class)
    public Result<Void> handleBindException(BindException e) {
        List<FieldError> fieldErrors = e.getBindingResult().getFieldErrors();
        StringBuilder sb = new StringBuilder();
        for (FieldError fieldError : fieldErrors) {
            sb.append(fieldError.getDefaultMessage()).append("; ");
        }
        return Result.error(400, sb.toString());
    }
    
    @ExceptionHandler(Exception.class)
    public Result<Void> handleException(Exception e) {
        e.printStackTrace();
        return Result.error(500, "ç³»ç»Ÿå†…éƒ¨é”™è¯¯");
    }
}
```

## ğŸš€ å¯åŠ¨å’Œæµ‹è¯•

### 1. å¯åŠ¨é¡¹ç›®

```bash
# è¿›å…¥serverç›®å½•
cd server

# å¯åŠ¨é¡¹ç›®
mvn spring-boot:run
```

### 2. æµ‹è¯•æ¥å£

#### æµ‹è¯•æ³¨å†Œæ¥å£
```bash
curl -X POST http://localhost:8080/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456",
    "phone": "13800138000",
    "email": "test@example.com",
    "nickname": "æµ‹è¯•ç”¨æˆ·"
  }'
```

#### æµ‹è¯•ç™»å½•æ¥å£
```bash
curl -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456"
  }'
```

## ğŸ“‹ ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

å®Œæˆç”¨æˆ·è®¤è¯æ¨¡å—åï¼ŒæŒ‰ç…§ä»¥ä¸‹é¡ºåºç»§ç»­å¼€å‘ï¼š

1. **å•†å“ç®¡ç†æ¨¡å—**
   - å•†å“å‘å¸ƒ
   - å•†å“åˆ—è¡¨æŸ¥è¯¢
   - å•†å“è¯¦æƒ…
   - å•†å“ç¼–è¾‘åˆ é™¤

2. **è®¢å•ç®¡ç†æ¨¡å—**
   - è®¢å•åˆ›å»º
   - è®¢å•çŠ¶æ€ç®¡ç†
   - è®¢å•æŸ¥è¯¢

3. **åœ°å€ç®¡ç†æ¨¡å—**
   - åœ°å€CRUDæ“ä½œ
   - é»˜è®¤åœ°å€è®¾ç½®

4. **æœç´¢åŠŸèƒ½**
   - å…³é”®è¯æœç´¢
   - åˆ†ç±»ç­›é€‰
   - ä»·æ ¼æ’åº

æ¯ä¸ªæ¨¡å—éƒ½æŒ‰ç…§ç›¸åŒçš„å¼€å‘æ¨¡å¼è¿›è¡Œï¼Œç¡®ä¿ä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
